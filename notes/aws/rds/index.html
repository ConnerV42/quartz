<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Related Notes  [[aws-wiki]] [[aurora]]  Useful Links   RDS Pricing  RDS Free Tier  How to connect To RDS with MySQL Client:  This simplified guide was pulled from this AWS Docs page: Connecting to a DB instance running the MySQL database engine."><title>cvwiki</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://wiki.connerv.com//icon.png><link href=https://wiki.connerv.com/styles.708c2658f93e3a9d323a1f9fded8f4b2.min.css rel=stylesheet><link href=https://wiki.connerv.com/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://wiki.connerv.com/js/darkmode.1fd38f434cae056438590d84cdc2b105.min.js></script>
<script src=https://wiki.connerv.com/js/util.9825137f5e7825e8553c68ce39ac9e44.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script src=https://wiki.connerv.com/js/popover.9b72b70bd35617d0635e9d15463662b2.min.js></script>
<script src=https://wiki.connerv.com/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script>
<script src=https://wiki.connerv.com/js/clipboard.c20857734e53a3fb733b7443879efa61.min.js></script>
<script src=https://wiki.connerv.com/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const BASE_URL="https://wiki.connerv.com/",fetchData=Promise.all([fetch("https://wiki.connerv.com/indices/linkIndex.9cb4fbbe8787f936346ca7dad0af0b9a.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://wiki.connerv.com/indices/contentIndex.d922e11993d2a1a9685136395ded0fae.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://wiki.connerv.com",!0,!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!0;drawGraph("https://wiki.connerv.com",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'â€™':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/wiki.connerv.com\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-XYFD95KB4J"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XYFD95KB4J",{anonymize_ip:!1})}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label placeholder><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://wiki.connerv.com/js/full-text-search.24827f874defbbc6d529926cbfcfb493.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://wiki.connerv.com/>cvwiki</a></h1><div class=spacer></div><div id=search-icon><p></p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title"/><desc id="desc"/><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title/><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title/><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><p class=meta>Nov 5, 2022
<a href=https://github.com/jackyzha0/quartz/tree/hugo/content/notes/aws/rds.md rel=noopener></a></p><ul class=tags></ul><aside class=mainTOC><details open><summary></summary><nav id=TableOfContents><ol><li><ol><li><a href=#related-notes>Related Notes</a></li><li><a href=#useful-links>Useful Links</a></li><li><a href=#how-to-connect-to-rds-with-mysql-client>How to connect To RDS with MySQL Client:</a></li><li><a href=#create-user-in-rds-mysql-engine>Create User in RDS (MySQL engine)</a></li></ol></li><li><a href=#rds---relational-database-service><strong>RDS - Relational Database Service</strong></a><ol><li><a href=#storage-options>Storage Options</a></li><li><a href=#rds-backups-and-restores>RDS Backups And Restores</a></li><li><a href=#rds-read-replicas>RDS Read-Replicas</a></li><li><a href=#enhanced-monitoring>Enhanced Monitoring</a></li><li><a href=#iam-db-authentication>IAM DB Authentication</a></li><li><a href=#multi-az--highly-available-high-availability->Multi-AZ ( #highly-available #high-availability )</a></li><li><a href=#rds-storage-auto-scaling>RDS Storage Auto Scaling</a></li><li><a href=#database-instance-types>Database Instance Types</a></li><li><a href=#security-considerations>Security Considerations</a></li><li><a href=#iam-database-authentication-for-mysql-and-postgresql>#IAM #database #authentication for MySQL and PostgreSQL</a></li></ol></li></ol></nav></details></aside><a href=#related-notes><h3 id=related-notes><span class=hanchor arialabel=Anchor># </span>Related Notes</h3></a><ul><li><a href=/notes/aws/aws-wiki rel=noopener class=internal-link data-src=/notes/aws/aws-wiki>aws-wiki</a></li><li><a href=/notes/aws/aurora rel=noopener class=internal-link data-src=/notes/aws/aurora>aurora</a></li></ul><a href=#useful-links><h3 id=useful-links><span class=hanchor arialabel=Anchor># </span>Useful Links</h3></a><ul><li><a href=https://aws.amazon.com/rds/pricing/ rel=noopener>RDS Pricing</a></li><li><a href=https://aws.amazon.com/rds/free/ rel=noopener>RDS Free Tier</a></li></ul><a href=#how-to-connect-to-rds-with-mysql-client><h3 id=how-to-connect-to-rds-with-mysql-client><span class=hanchor arialabel=Anchor># </span>How to connect To RDS with MySQL Client:</h3></a><ul><li>This simplified guide was pulled from this AWS Docs page:
<a href=https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_ConnectToInstance.html rel=noopener>Connecting to a DB instance running the MySQL database engine</a>. If you need your RDS instance&rsquo;s master password, you cannot obtain that information from the console. Use the AWS CLI to obtain such information, guide
<a href=https://awscli.amazonaws.com/v2/documentation/api/latest/reference/lightsail/get-relational-database-master-user-password.html rel=noopener>here</a>.</li></ul><ol><li>Install <code>mariadb</code> and <code>mariadb-client</code> so that you can connect to the RDS instance:</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>brew install mariadb
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>brew install mariadb-client
</span></span></code></pre></td></tr></table></div></div><ol start=2><li>Verify install:</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>mysql --version
</span></span></code></pre></td></tr></table></div></div><ol start=3><li>Connect to your instance (<code>-p</code> prompts for password):</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>mysql -h $WRITER_INSTANCE -P $PORT -u $DB_USER -p
</span></span></code></pre></td></tr></table></div></div><a href=#create-user-in-rds-mysql-engine><h3 id=create-user-in-rds-mysql-engine><span class=hanchor arialabel=Anchor># </span>Create User in RDS (MySQL engine)</h3></a><ol><li>View grants for master user as a reference, carefully determine the permissions that make sense for your user:</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SHOW</span><span class=w> </span><span class=n>GRANTS</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=n>master_user</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ol start=2><li>Create new user and password:</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>USER</span><span class=w> </span><span class=s1>&#39;new_user&#39;</span><span class=o>@</span><span class=s1>&#39;%&#39;</span><span class=w> </span><span class=n>IDENTIFIED</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=s1>&#39;password&#39;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ol start=3><li>Grant permissions to the new user with the <code>GRANT</code> command:</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>GRANT</span><span class=w> </span><span class=k>SELECT</span><span class=p>,</span><span class=w> </span><span class=k>INSERT</span><span class=p>,</span><span class=w> </span><span class=k>UPDATE</span><span class=p>,</span><span class=w> </span><span class=k>DELETE</span><span class=p>,</span><span class=w> </span><span class=k>CREATE</span><span class=p>,</span><span class=w> </span><span class=k>DROP</span><span class=p>,</span><span class=w> </span><span class=n>RELOAD</span><span class=p>,</span><span class=w> </span><span class=n>PROCESS</span><span class=p>,</span><span class=w> </span><span class=k>REFERENCES</span><span class=p>,</span><span class=w> </span><span class=k>INDEX</span><span class=p>,</span><span class=w> </span><span class=k>ALTER</span><span class=p>,</span><span class=w> </span><span class=k>SHOW</span><span class=w> </span><span class=n>DATABASES</span><span class=p>,</span><span class=w> </span><span class=k>CREATE</span><span class=w> </span><span class=k>TEMPORARY</span><span class=w> </span><span class=n>TABLES</span><span class=p>,</span><span class=w> </span><span class=k>LOCK</span><span class=w> </span><span class=n>TABLES</span><span class=p>,</span><span class=w> </span><span class=k>EXECUTE</span><span class=p>,</span><span class=w> </span><span class=n>REPLICATION</span><span class=w> </span><span class=n>SLAVE</span><span class=p>,</span><span class=w> </span><span class=n>REPLICATION</span><span class=w> </span><span class=n>CLIENT</span><span class=p>,</span><span class=w> </span><span class=k>CREATE</span><span class=w> </span><span class=k>VIEW</span><span class=p>,</span><span class=w> </span><span class=k>SHOW</span><span class=w> </span><span class=k>VIEW</span><span class=p>,</span><span class=w> </span><span class=k>CREATE</span><span class=w> </span><span class=k>ROUTINE</span><span class=p>,</span><span class=w> </span><span class=k>ALTER</span><span class=w> </span><span class=k>ROUTINE</span><span class=p>,</span><span class=w> </span><span class=n>EVENT</span><span class=p>,</span><span class=w> </span><span class=k>TRIGGER</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=o>*</span><span class=p>.</span><span class=o>*</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=s1>&#39;new_user&#39;</span><span class=o>@</span><span class=s1>&#39;%&#39;</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=k>GRANT</span><span class=w> </span><span class=k>OPTION</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>user: Don&rsquo;t give CREATE USER, INVOKE SAGEMAKER, INVOKE COMPREHEND, SELECT INTO S3, LOAD FROM S3</p><ul><li><a href=https://aws.amazon.com/premiumsupport/knowledge-center/duplicate-master-user-mysql/ rel=noopener>How do I create another master user for my Amazon RDS DB instance that is running MySQL?</a></li></ul><a href=#rds---relational-database-service><h2 id=rds---relational-database-service><span class=hanchor arialabel=Anchor># </span><strong>RDS - Relational Database Service</strong></h2></a><a href=#storage-options><h3 id=storage-options><span class=hanchor arialabel=Anchor># </span>Storage Options</h3></a><ul><li>Storage is allocated to RDS, much in the same way that it is allocated in EC2. You have 3 options:<ul><li>gp2 (General Purpose SSD, Default) - General Purpose SSD volumes offer cost-effective storage that is ideal for a broad range of workloads. These volumes deliver single-digit millisecond latencies and the ability to burst to 3,000 IOPS for extended periods of time. Baseline performance for these volumes is determined by the volume&rsquo;s size.<ul><li>io1 (Provisioned IOPS) - Provisioned IOPS storage is designed to meet the needs of I/O-intensive workloads, particularly database workloads, that require low I/O latency and consistent I/O throughput.</li><li>Magnetic (Amazon RDS also supports magnetic storage for backward compatibility, but it is not recommended)</li></ul></li></ul></li></ul><a href=#rds-backups-and-restores><h3 id=rds-backups-and-restores><span class=hanchor arialabel=Anchor># </span>RDS Backups And Restores</h3></a><ul><li>If Multi-AZ is enabled, backups occur from the standby instance (primary instance is never used)</li><li>If Multi-AZ is disabled, backups occur from the single running instance</li></ul><a href=#rpo---recovery-point-objective><h4 id=rpo---recovery-point-objective><span class=hanchor arialabel=Anchor># </span>RPO - Recovery Point Objective</h4></a><ul><li>Time between the last backup and the incident</li><li>Amount of maximum data loss</li><li>Influences technical solution & cost</li><li>Generally lower values cost more (more backups, more often)</li><li>If an incident occurs 8 hours after the last incremental database backup was taken, that&rsquo;s an 8 hour RPO.</li></ul><a href=#rto---recovery-time-objective><h4 id=rto---recovery-time-objective><span class=hanchor arialabel=Anchor># </span>RTO - Recovery Time Objective</h4></a><ul><li>Time between the DR event and full recovery</li><li>Influenced by process, staff, tech and documentation</li><li>Generally lower values cost more</li></ul><a href=#manual-snapshots><h4 id=manual-snapshots><span class=hanchor arialabel=Anchor># </span>Manual Snapshots</h4></a><ul><li>Ran against an RDS database. The first snapshot is a full copy of the data used on the RDS volume. From then on, each snapshot is incremental.</li><li>There is a brief interruption between the compute resource (think ECS or Lambda) and the storage, when a snapshot is taken.<ul><li>This can impact your application, but only if you&rsquo;re using Single-AZ</li><li>Incremental backups are usually much quicker, as long as you don&rsquo;t have massive changes in data</li><li>Manual snapshots live on past the lifetime of the RDS instance</li></ul></li></ul><a href=#automated-backups><h4 id=automated-backups><span class=hanchor arialabel=Anchor># </span>Automated Backups</h4></a><ul><li>Just snapshots, that occur automatically</li><li>Occurs during a backup window that you define</li><li>Window impacts RPO</li><li>Every 5 minutes, RDS writes transaction logs to S3 every 5 minutes. This allows you to pair with a snapshot, so that you can achieve a very low RPO value. These logs have a retention period from 0 to 35 days.<ul><li>This works by first, restoring the backup, and then &ldquo;replaying&rdquo; transaction logs to bring DB to desired point in time</li></ul></li></ul><a href=#rds-restores><h4 id=rds-restores><span class=hanchor arialabel=Anchor># </span>RDS Restores</h4></a><ul><li>Creates a new RDS Instance - new address, meaning application code changes</li><li>Snapshots = single point in time, creation time</li><li>Automated = any 5 minute point in time</li><li>RDS Restores aren&rsquo;t fast, especially if the database is large - Think about RTO</li><li>Snapshots are the only way to protect from data corruption, with replication, corrupted data is also replicated</li></ul><a href=#rds-read-replicas><h3 id=rds-read-replicas><span class=hanchor arialabel=Anchor># </span>RDS Read-Replicas</h3></a><ul><li>Read Replicas, unlike the Multi-AZ standby instances, can be used for read operations.</li><li>Kept in sync using asynchronous replication. Written fully to the primary instance first, then propagated to the read replicas, which means there could be a slight lag.</li><li>Read Replicas provide performance improvements<ul><li>5 dedicated read-replicas per instance</li><li>Each providing an additional instance of read performance, allows scaling out read capacity</li><li>Applications code can be configured to perform reads against read replicas</li></ul></li><li>Cross-region read replicas can be created, AWS handles all networking<ul><li>Provides global performance and availability improvements by deploying cross region read replicas around the world</li></ul></li><li>Read Replicas offer near zero RPO, if the primary instance fails, the Read Replica can be quickly promoted to be a new primary instance. This can be done in minutes. Works for database failure only - watch for data corruption.</li></ul><a href=#enhanced-monitoring><h3 id=enhanced-monitoring><span class=hanchor arialabel=Anchor># </span>Enhanced Monitoring</h3></a><ul><li><strong>Enhanced Monitoring</strong> metrics are useful when you want to see how different processes or threads on a DB instance use the CPU when working with RDS.</li></ul><a href=#iam-db-authentication><h3 id=iam-db-authentication><span class=hanchor arialabel=Anchor># </span>IAM DB Authentication</h3></a><ul><li><strong>IAM DB Authentication</strong> is used to authenticate to your DB instance. This works with MySQL and PostgreSQL. With this authentication method, you don&rsquo;t need to use a password when you connect to a DB instance. Instead, you generate an authentication token, which has a lifetime of 15 minutes.</li></ul><a href=#multi-az--highly-available-high-availability-><h3 id=multi-az--highly-available-high-availability-><span class=hanchor arialabel=Anchor># </span>Multi-AZ ( #highly-available #high-availability )</h3></a><ul><li>RDS provides high availability and failover support for DB instances using <strong>Multi-AZ</strong> deployments (<strong>Single-AZ</strong> is also supported, if desired).</li><li>Amazon RDS uses several different technologies to provide failover support. Multi-AZ deployments for Oracle, PostgreSQL, MySQL, and MariaDB DB instances use Amazon&rsquo;s failover technology. SQL Server DB instances use SQL Server Database Mirroring (DBM). In a Multi-AZ deployment, Amazon RDS automatically provisions and maintains a synchronous standby replica in a different AZ. The primary DB instance is synchronously replicated across AZs to a standby replica to provide data redundancy, eliminate I/O freezes, and minimize latency spikes during system backups. Running a DB instance with high availability can enhance availability during planned system maintenance, and help protect your databases against DB instance failure and AZ disruption. Amazon RDS detects and automatically recovers from the most common failure scenarios for Multi-AZ deployments so that you can resume database operations as quickly as possible without administrative intervention. The high-availability feature is not a scaling solution for read-only scenarios; you cannot use a standby replicate to serve read traffic. To service read-only traffic, you should use a Read Replica.</li><li>Amazon RDS automatically performs a failover in the event of any of the following:<ol><li>Loss of availability in the primary Availability Zone.</li><li>Loss of network connectivity to primary.</li><li>Compute unit failure on primary.</li><li>Storage failure on primary.</li></ol></li><li>In Amazon RDS, failover is automatically handled so that you can resume database operations as quickly as possible without administrative intervention in the event that your primary database instance went down. When failing over, Amazon RDS simply flips the canonical name record (CNAME) for your DB instance to point at the standby, which is in turn promoted to become the new primary.<ul><li>Note that a standby DB instance can&rsquo;t be directly used, unless a failover happens, meaning that it cannot be used to scale read access. A read replica must be used for this purpose.</li><li>Note that RDS Multi-AZ is highly available, but not fault tolerant. There will be 60-120 seconds of impact during the failover.</li><li>Note that RDS Multi-AZ happens in the same region only (other AZs in the VPC)</li><li>Note that by using RDS Multi-AZ, backups are taken from Standby DB instance, removing any potential performance impact.</li></ul></li></ul><a href=#rds-storage-auto-scaling><h3 id=rds-storage-auto-scaling><span class=hanchor arialabel=Anchor># </span>RDS Storage Auto Scaling</h3></a><ul><li>RDS Storage Auto Scaling automatically scales storage capacity in response to growing database workloads, with zero downtime. Under-provisioning could result in application downtime, and over-provisioning could result in underutilized resources and higher costs. With RDS Storage Auto Scaling, you simply set your desired maximum storage limit, and Auto Scaling takes care of the rest. RDS Storage Auto Scaling continuously monitors actual storage consumption, and scales capacity up automatically when actual utilization approaches provisioned storage capacity. Auto Scaling works with new and existing database instances. You can enable Auto Scaling with just a few clicks in the AWS Management Console. There is no additional cost for RDS Storage Auto Scaling. You pay only for the RDS resources needed to run your applications.</li></ul><a href=#database-instance-types><h3 id=database-instance-types><span class=hanchor arialabel=Anchor># </span>Database Instance Types</h3></a><ul><li><code>db.m5</code> - General Usage Type</li><li><code>db.r5</code> - Memory Optimized Type</li><li><code>db.t3</code> - Burst Instance Type</li></ul><a href=#security-considerations><h3 id=security-considerations><span class=hanchor arialabel=Anchor># </span>Security Considerations</h3></a><ul><li>Access to RDS is controlled via Security Group</li></ul><a href=#iam-database-authentication-for-mysql-and-postgresql><h3 id=iam-database-authentication-for-mysql-and-postgresql><span class=hanchor arialabel=Anchor># </span>#IAM #database #authentication for MySQL and PostgreSQL</h3></a><p>You can authenticate to your DB instance using AWS Identity and Access Management (IAM) database authentication. IAM database authentication works with MySQL and PostgreSQL. With this authentication method, you don&rsquo;t need to use a password when you connect to a DB instance. Instead, you use an authentication token.
Use IAM DB Authentication and create database accounts using the AWS-provided <code>AWSAuthenticationPlugin</code> plugin in MySQL.</p><p>#aws #relational-database #relational #sql</p></article><hr><div class=page-end id=footer><div class=backlinks-container><h3></h3><ul class=backlinks><li><a href=/notes/aws/aurora/ data-ctx="Relational Database Service" data-src=/notes/aws/aurora class=internal-link>Aurora</a></li><li><a href=/notes/aws/aws-backup/ data-ctx="Relational Database Service" data-src=/notes/aws/aws-backup class=internal-link>AWS Backup</a></li><li><a href=/notes/aws/aws-wiki/ data-ctx=RDS data-src=/notes/aws/aws-wiki class=internal-link>AWS Wiki</a></li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3></h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://wiki.connerv.com/js/graph.abd4bc2af3869a96524d7d23b76152c7.js></script></div></div><div id=contact_buttons><footer><p></p><ul><li><a href=https://wiki.connerv.com/></a></li></ul></footer></div></div></body></html>